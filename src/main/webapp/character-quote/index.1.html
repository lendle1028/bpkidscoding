<html>

<head>
    <meta charset="utf-8" />
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"
        integrity="sha256-eGE6blurk5sHj+rmkfsGYeKyZx3M4bG+ZlFyA7Kns7E=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest"></script>
    <script src="quote.js"></script>
    <script src="separator.js"></script>
    <script src="os.js"></script>
    <link href="quote.css" rel="stylesheet" />
    <link href="separator.css" rel="stylesheet" />
    <link href="os.css" rel="stylesheet" />
    <link href="main.css" rel="stylesheet" />
    <link href="https://code.jquery.com/ui/1.12.1/themes/le-frog/jquery-ui.css" rel="stylesheet" />
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script> -->
    <!--link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" /-->
</head>

<body>
    <div id="container">
        <div id="tree">
            <table style="width: 100%;">
                <tr>
                    <td>書名</td>
                </tr>
                <tr>
                    <td>簡介</td>
                </tr>
                <tr>
                    <td>角色介紹</td>
                </tr>
                <tr>
                    <td onclick="flip(0);">第一頁</td>
                </tr>
                <tr>
                    <td onclick="flip(1);">第二頁</td>
                </tr>
                <tr>
                    <td onclick="flip(2);">第三頁</td>
                </tr>
            </table>
        </div>
        <div id="editorContainer">
            <!--div id="editorjs"></div-->
        </div>
    </div>

    <button onclick="save();">Save</button>

    <script>
        function flip(index) {
            $("#editorContainer").empty();
            let editorUI = document.createElement("div");
            $(editorUI).attr("id", "editorjs");
            $("#editorContainer").append($(editorUI));
            const editor = new EditorJS({
                holderId: 'editorjs',
                autofocus: true,
                tools: {
                    characterQuote: Quote,
                    separator: Separator,
                    os: Os
                },
                data: data.data[index]
            });
        }

        let data = {
            title: "Book1",
            summary: "簡介內容",
            characters: {
                "test1": "test1",
                "test2": "test2",
                "test3": "test3"
            },
            data: [
                { "time": 1563781369246, "blocks": [{ "type": "characterQuote", "data": { "character": "test2", "message": "111" } }, { "type": "os", "data": { "message": "12121" } }, { "type": "separator", "data": {} }], "version": "2.15.0" },
                { "time": 1563781369246, "blocks": [{ "type": "characterQuote", "data": { "character": "test2", "message": "112" } }, { "type": "os", "data": { "message": "12121" } }, { "type": "separator", "data": {} }], "version": "2.15.0" },
                { "time": 1563781369246, "blocks": [{ "type": "characterQuote", "data": { "character": "test2", "message": "113" } }, { "type": "os", "data": { "message": "12121" } }, { "type": "separator", "data": {} }], "version": "2.15.0" }
            ]
        };

        function save() {
            editor.save().then(savedData => {
                console.log(JSON.stringify(savedData));
            });
        }

    </script>
    <div>Icons made by <a href="https://www.freepik.com/" title="Freepik">Freepik</a> from <a
            href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a
            href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0
            BY</a></div>
</body>

</html>